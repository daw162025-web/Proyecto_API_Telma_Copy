<div class="panel1 mb-5">
  
  <div class="d-lg-none bg-transparent">
    <div class="u-center-content bg-transparent text-center p-4">
      <h1 class="tituloPrincipal">El cambio <br> comienza aquÃ­.</h1>
      
      <div class="mb-4 mt-3">
        <input type="text" 
               class="form-control form-control-lg shadow-sm" 
               placeholder="ðŸ” Busca una peticiÃ³n..." 
               [ngModel]="searchTerm()" 
               (ngModelChange)="searchTerm.set($event)">
      </div>

      <a routerLink="/petitions/create" class="btn btn-primary col-12 mb-3">Crear una peticiÃ³n</a>
      <a class="btn btn-petition col-12 mb-3 me-2">Comenzar con IA</a>
    </div>
    
    </div>


  <div class="d-none d-lg-block u-shape-wrapper bg-transparent mx-5">
    <div class="row justify-content-center">

      <div class="col-lg-3">
        <div class="p-6 d-flex justify-content-center">
          <div class="card cardU shadow-sm border-0">
            <img [src]="successStories[0].img" class="card-img-top rounded-circle mx-auto mt-3" style="width: 200px; height: 200px; object-fit: cover;">
            <div class="card-body card-bodyU mx-3 text-center">
              <h5 class="card-title text-danger fw-bold">ðŸ”´ Â¡Victoria!</h5>
              <h6>{{ successStories[0].firmas }} firmas</h6>
            </div>
          </div>
        </div>
        <div class="p-6 d-flex justify-content-center mt-4">
          <div class="card cardU shadow-sm border-0" style="margin-left: 90px;">
            <img [src]="successStories[1].img" class="card-img-top rounded-circle mx-auto mt-3" style="width: 200px; height: 200px; object-fit: cover;">
            <div class="card-body card-bodyU mx-3 text-center">
              <h5 class="card-title text-danger fw-bold">ðŸ”´ Â¡Victoria!</h5>
              <h6>{{ successStories[1].firmas }} firmas</h6>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-6 text-center">
        <div class="u-center-content bg-transparent g-2 mt-5">
          <h1 class="tituloPrincipal2 mx-auto display-4 fw-bold">El cambio <br> comienza aquÃ­.</h1>
          
          <div class="col-md-10 mx-auto mt-4 mb-4">
            <div class="input-group input-group-lg shadow-sm">
              <span class="input-group-text bg-white border-end-0 text-muted">
                <i class="bi bi-search"></i>
              </span>
              <input type="text" 
                     class="form-control border-start-0" 
                     placeholder="Busca por tÃ­tulo..." 
                     [ngModel]="searchTerm()" 
                     (ngModelChange)="searchTerm.set($event)">
            </div>
          </div>

          <h3 class="parrafoL mx-auto mb-4 mt-3 text-muted">Ãšnete a <span style="font-weight:bold" class="text-dark">567.052.997</span> personas que estÃ¡n impulsando un cambio real.</h3>
          
          <div class="d-flex justify-content-center gap-3">
            <a routerLink="/petitions/create" class="btn btn-danger btn-lg px-4">Crear una peticiÃ³n</a>
            <a class="btn btn-outline-dark btn-lg px-4">Comenzar con IA</a>
          </div>
        </div>
      </div>

      <div class="col-lg-3">
        <div class="p-6 d-flex justify-content-center">
          <div class="card cardU shadow-sm border-0">
            <img [src]="successStories[3].img" class="card-img-top rounded-circle mx-auto mt-3" style="width: 200px; height: 200px; object-fit: cover;">
            <div class="card-body card-bodyU mx-3 text-center">
              <h5 class="card-title text-danger fw-bold">ðŸ”´ Â¡Victoria!</h5>
              <h6>{{ successStories[3].firmas }} firmas</h6>
            </div>
          </div>
        </div>
        <div class="p-6 d-flex justify-content-center mt-4">
          <div class="card cardU shadow-sm border-0" style="margin-right: 90px;">
            <img [src]="successStories[4].img" class="card-img-top rounded-circle mx-auto mt-3" style="width: 200px; height: 200px; object-fit: cover;">
            <div class="card-body card-bodyU mx-3 text-center">
              <h5 class="card-title text-danger fw-bold">ðŸ”´ Â¡Victoria!</h5>
              <h6>{{ successStories[4].firmas }} firmas</h6>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<div class="container mt-5 mb-2">
  <h2 class="mt-4 fs-4 fw-bold">Apoya causas que te importan</h2>
  <div class="d-flex flex-wrap gap-2 mt-2">
    @for (cat of categories; track $index) {
      <button class="btn btn-light border rounded-pill px-3 py-1 fw-bold text-secondary small">
        {{ cat }} ðŸ¡¢
      </button>
    }
  </div>
</div>

<div class="container mt-3 pb-4">
  @if (loading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-danger" role="status"></div>
      <p class="mt-2 text-muted">Cargando...</p>
    </div>
  } @else {
    <div class="row g-3">
      @for (pet of filteredPetitions(); track pet.id) {
        <div class="col-md-6 col-lg-3">
          <a [routerLink]="['/petitions', pet.id]" class="text-decoration-none text-dark"> 
            <div class="card h-100 shadow-sm border-0 card-hover">
              <div class="p-3">
                <img [src]="getImgUrl(pet)" 
                     class="img-fluid card-img-top rounded" 
                     style="height: 180px; width: 100%; object-fit: cover;"
                     alt="{{ pet.title }}">
                <div class="card-body px-0 pt-3">
                  <h5 class="card-title fw-bold fs-6 text-truncate">{{ pet.title }}</h5>
                  <div class="progress my-2" style="height: 5px;">
                    <div class="progress-bar bg-danger" [style.width.%]="((pet.signeds || 0) * 100) / 1000"></div>
                  </div>
                  <p class="card-text text-muted small"><strong>{{ pet.signeds || 0 }}</strong> firmas</p>
                </div>
              </div>
            </div>
          </a>
        </div>
      }
      @if (filteredPetitions().length === 0) {
        <div class="col-12 text-center py-5">
          <p class="text-muted">No se encontraron resultados.</p>
        </div>
      }
    </div>
  }
</div>

<div class="d-lg-none bg-transparent mb-5 pb-5">
  <h4 class="text-center mb-3 text-muted">Historias de Ã©xito</h4>
  <div id="carouselEx" class="carousel slide carousel-dark bg-transparent">
    <div class="carousel-inner px-5 bg-transparent">
      @for (story of successStories; track $index) {
        <div class="carousel-item card text-center bg-transparent border-0" [class.active]="$index === 0">
          <img [src]="story.img" class="card-img-top rounded-circle mx-auto" style="width: 150px; height: 150px; object-fit: cover;" alt="Victoria">
          <div class="card-body px-4 text-center bg-transparent">
            <h5 class="card-title text-danger mt-2">ðŸ”´ Â¡Victoria!</h5>
            <small class="text-muted">{{ story.firmas }} firmas</small>
          </div>
        </div>
      }
    </div>
    <button class="carousel-control-prev bg-transparent" type="button" data-bs-target="#carouselEx" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next bg-transparent" type="button" data-bs-target="#carouselEx" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>

<div class="container my-5">
  <div class="row align-items-center bg-white rounded shadow-sm p-4">
    <div class="col-12 col-md-6 order-md-2">
      <img src="assets/imagenes/personas.jpg" class="img-fluid rounded" alt="Comunidad">
    </div>
    <div class="col-12 col-md-6">
      <div class="p-4">
        <h2 style="font-weight: 700;">Apoya el cambio.</h2>
        <button class="btn btn-outline-danger btn-lg mt-3 rounded-pill px-5 fw-bold">Contribuir</button>
      </div>
    </div>
  </div>
</div>